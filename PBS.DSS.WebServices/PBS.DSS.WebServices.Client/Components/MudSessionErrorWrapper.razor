@if (!SharedStateService.HasErrors())
{
    @Content
}
else
{
    <MudStack Style="display:flex; align-items:center">
        <MudText Typo="Typo.h6">
            Error loading your page
        </MudText>
        <MudText>
            @if (SharedStateService.HasErrors()) { @SharedStateService.GetErrors(); }
        </MudText>
    </MudStack>
}

@code {
    [Parameter]
    public RenderFragment? Content { get; set; }

    [Parameter]
    public Func<bool>? Validate { get; set; }

    [Parameter]
    public Action? Fetch { get; set; }
    [Parameter]
    public Func<Task>? FetchAsync { get; set; }

    protected override async Task OnInitializedAsync()
    {
        if (!Validate?.Invoke() ?? false) return;

        if (FetchAsync != null) await FetchAsync.Invoke();
        if (Fetch != null) Fetch.Invoke();
    }
}
