@inherits LayoutComponentBase

<MudProviders />

<MudLayout>
    <MudAppBar Elevation="1" Dense="true" Color="Color.Surface">
        <MudSpacer />
        <MudStack Row="true">
            <MudButton Style="color:white;" OnClick="SetLanguageEN">EN</MudButton>
            <MudButton Style="color:white;" OnClick="SetLanguageFR">FR</MudButton>
        </MudStack>
    </MudAppBar>
    <MudMainContent>
        <MudStack></MudStack>
        <MudContainer MaxWidth="MaxWidth.Large" Class="pt-5 justify-center align-center">
            @Body
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code {
    private async Task SetLanguageEN() { await SetCulture("en-CA"); }
    private async Task SetLanguageFR() { await SetCulture("fr-CA"); }

    private async Task SetCulture(string c)
    {
        var cInfo = System.Globalization.CultureInfo.GetCultureInfo(c);

        if (System.Globalization.CultureInfo.CurrentCulture.Name == cInfo.Name) return;

        await SessionStorageService.SetSessionCulture(cInfo.Name);

        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
    }
}